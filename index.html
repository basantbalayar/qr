<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate QR asper your BRAND</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="basantbalayarqr.js"></script>
    <style>
        input[type="file"]::file-selector-button {
            margin-right: 0.5rem; border: none; background: #3b82f6; /* bg-blue-500 */
            padding: 0.5rem 0.75rem; border-radius: 0.375rem; /* rounded-md */
            color: white; cursor: pointer; transition: background-color 0.2s ease-in-out;
        }
        input[type="file"]::file-selector-button:hover { background: #2563eb; /* bg-blue-600 */ }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; /* slate-300 */ border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; /* slate-500 */ }
        .color-picker-wrapper { position: relative; width: 40px; height: 40px; }
        .color-picker-wrapper input[type="color"] {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer;
        }
        .color-picker-wrapper .color-preview {
            width: 100%; height: 100%; border-radius: 0.375rem; /* rounded-md */
            border: 1px solid #e5e7eb; /* border-gray-200 */ cursor: pointer;
            display: flex; align-items: center; justify-content: center;
        }
        .control-section {
            border: 1px solid #e5e7eb; /* border-gray-200 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 1rem;
            margin-bottom: 1.25rem; /* mb-5 */
            background-color: #f9fafb; /* bg-gray-50 */
        }
        .control-section h3 {
            font-size: 0.875rem; /* text-sm */
            font-weight: 600; /* font-semibold */
            color: #0c62ec; /* text-gray-700 */
            margin-bottom: 0.75rem; /* mb-3 */
            padding-bottom: 0.5rem; /* pb-2 */
            border-bottom: 1px solid #e5e7eb; /* border-gray-200 */
        }
        .grid-cols-auto-fit {
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        }
    </style>
</head>
<body class="bg-slate-100 flex flex-col items-center justify-center min-h-screen p-4 font-sans transition-all duration-300">

    <div class="bg-white p-6 sm:p-8 rounded-xl shadow-2xl w-full max-w-5xl">
        <header class="mb-6 sm:mb-8 text-center">
            <h1 class="text-3xl sm:text-4xl font-bold text-slate-800">FREE Generate QR asper your BRAND</h1>
            <p class="text-slate-600 mt-2 text-sm sm:text-base">Customize every aspect of your QR codes.</p>
            <p class="text-slate-600 mt-2 text-sm sm:text-base">I am not storing your any data.<b>"Basant Balayar"</b></p>
        </header>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8">
            <div class="lg:col-span-2 space-y-3 overflow-y-auto max-h-[70vh] pr-2">
                <div class="control-section">
                    <h3>Basic Options</h3>
                    <div>
                        <label for="data" class="block text-xs font-medium text-slate-700 mb-1">Data (URL or Text)</label>
                        <input type="text" id="data" value="https://basantbalayar.com.np" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-shadow duration-200" placeholder="Enter URL or text">
                    </div>
                     <div class="mt-3">
                        <label for="margin" class="block text-xs font-medium text-slate-700 mb-1">QR Code Margin (Quiet Zone)</label>
                        <input type="number" id="margin" value="10" min="0" max="50" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-shadow duration-200">
                    </div>
                </div>

                <div class="control-section">
                    <h3>Dots Options</h3>
                    <div class="grid grid-cols-auto-fit gap-4">
                        <div>
                            <label for="dotType" class="block text-xs font-medium text-slate-700 mb-1">Dot Style</label>
                            <select id="dotType" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md transition-shadow duration-200">
                                <option value="square">Square</option>
                                <option value="rounded" selected>Rounded</option>
                                <option value="dots">Dots</option>
                                <option value="classy">Classy</option>
                                <option value="classy-rounded">Classy Rounded</option>
                                <option value="extra-rounded">Extra Rounded</option>
                            </select>
                        </div>
                        <div>
                            <label for="fgColor" class="block text-xs font-medium text-slate-700 mb-1">Dot Color</label>
                            <div class="color-picker-wrapper">
                                <div id="fgColorPreview" class="color-preview" style="background-color: #000000;"></div>
                                <input type="color" id="fgColor" value="#000000" class="mt-1">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <h3>Corners Options</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <h4 class="text-xs font-semibold text-slate-600 mb-2">Square Corners</h4>
                            <label for="cornersSquareType" class="block text-xs font-medium text-slate-700 mb-1">Style</label>
                            <select id="cornersSquareType" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option value="">Default (None)</option>
                                <option value="square">Square</option>
                                <option value="dot">Dot</option>
                                <option value="extra-rounded">Extra Rounded</option>
                            </select>
                            <label for="cornersSquareColor" class="block text-xs font-medium text-slate-700 mb-1 mt-2">Color</label>
                            <div class="color-picker-wrapper">
                                <div id="cornersSquareColorPreview" class="color-preview" style="background-color: #000000;"></div>
                                <input type="color" id="cornersSquareColor" value="#000000" class="mt-1">
                            </div>
                        </div>
                        <div>
                            <h4 class="text-xs font-semibold text-slate-600 mb-2">Dot Corners</h4>
                            <label for="cornersDotType" class="block text-xs font-medium text-slate-700 mb-1">Style</label>
                            <select id="cornersDotType" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option value="">Default (None)</option>
                                <option value="square">Square</option>
                                <option value="dot">Dot</option>
                            </select>
                            <label for="cornersDotColor" class="block text-xs font-medium text-slate-700 mb-1 mt-2">Color</label>
                            <div class="color-picker-wrapper">
                                <div id="cornersDotColorPreview" class="color-preview" style="background-color: #000000;"></div>
                                <input type="color" id="cornersDotColor" value="#000000" class="mt-1">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <h3>Background Options</h3>
                    <div class="grid grid-cols-auto-fit gap-4 mb-3">
                        <div>
                            <label for="bgType" class="block text-xs font-medium text-slate-700 mb-1">Type</label>
                            <select id="bgType" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option value="solid">Solid Color</option>
                                <option value="gradient">Gradient</option>
                                <option value="transparent">Transparent</option> {/* */}
                            </select>
                        </div>
                        <div id="solidBgOptions"> 
                            <label for="bgColor" class="block text-xs font-medium text-slate-700 mb-1">Background Color</label>
                            <div class="color-picker-wrapper">
                                <div id="bgColorPreview" class="color-preview" style="background-color: #ffffff;"></div>
                                <input type="color" id="bgColor" value="#ffffff" class="mt-1">
                            </div>
                        </div>
                    </div>
                    <div id="gradientBgOptions" class="hidden space-y-3"> 
                        <div class="grid grid-cols-auto-fit gap-4">
                            <div>
                                <label for="bgGradientType" class="block text-xs font-medium text-slate-700 mb-1">Gradient Type</label>
                                <select id="bgGradientType" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                    <option value="linear">Linear</option>
                                    <option value="radial">Radial</option>
                                </select>
                            </div>
                            <div id="bgGradientRotationContainer">
                                <label for="bgGradientRotation" class="block text-xs font-medium text-slate-700 mb-1">Rotation (Linear)</label>
                                <input type="number" id="bgGradientRotation" value="0" step="1" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                             <div>
                                <label for="bgGradientColor1" class="block text-xs font-medium text-slate-700 mb-1">Gradient Color 1</label>
                                <div class="color-picker-wrapper">
                                    <div id="bgGradientColor1Preview" class="color-preview" style="background-color: #ffffff;"></div>
                                    <input type="color" id="bgGradientColor1" value="#ffffff" class="mt-1">
                                </div>
                            </div>
                            <div>
                                <label for="bgGradientColor2" class="block text-xs font-medium text-slate-700 mb-1">Gradient Color 2</label>
                                <div class="color-picker-wrapper">
                                    <div id="bgGradientColor2Preview" class="color-preview" style="background-color: #ededed;"></div>
                                    <input type="color" id="bgGradientColor2" value="#ededed" class="mt-1">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <h3>Logo / Image Options</h3>
                    <div class="mb-3">
                        <label for="logo" class="block text-xs font-medium text-slate-700 mb-1">Logo Image (PNG only) Recommended size till 0.60</label>
                        <input type="file" id="logo" accept="image/png" class="mt-1 block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 transition-colors duration-200 cursor-pointer">
                        <button id="removeLogo" class="mt-2 text-xs text-red-500 hover:text-red-700 transition-colors duration-200 hidden">&times; Remove Logo</button>
                    </div>
                    <div class="grid grid-cols-auto-fit gap-4">
                        <div>
                            <label for="logoSize" class="block text-xs font-medium text-slate-700 mb-1">Logo Size (0.1-1.0)</label>
                            <input type="number" id="logoSize" value="0.3" min="0.1" max="1" step="0.05" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                        </div>
                        <div>
                            <label for="logoMargin" class="block text-xs font-medium text-slate-700 mb-1">Logo Margin (px)</label>
                            <input type="number" id="logoMargin" value="5" min="0" max="50" step="1" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                        </div>
                    </div>
                    <div class="mt-3">
                        <label for="hideBackgroundDots" class="flex items-center text-xs font-medium text-slate-700">
                            <input type="checkbox" id="hideBackgroundDots" checked class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mr-2">
                            Hide QR Dots Behind Logo
                        </label>
                    </div>
                </div>

            </div>

            <div class="lg:col-span-1 flex flex-col items-center justify-start bg-slate-50 p-4 sm:p-6 rounded-lg shadow-inner min-h-[300px] sticky top-6">
                <div id="qrCodeContainer" class="transition-all duration-300 ease-in-out w-[250px] h-[250px] sm:w-[280px] sm:h-[280px] md:w-[300px] md:h-[300px]">
                    </div>
                <p id="qrLoading" class="text-slate-500 text-sm mt-4 hidden">Generating QR Code...</p>
                <button id="downloadBtn" class="mt-6 w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2.5 px-6 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-all duration-200 ease-in-out transform hover:scale-105">
                    Download QR Code (PNG)
                </button>
            </div>
        </div>
    </div>

    <footer class="text-center mt-8 mb-4">
        <p class="text-xs text-slate-500">
            By : <a href="https://basantbalayar.com.np" target="_blank" rel="noopener noreferrer" class="text-blue-500 hover:underline">Basant Balayar</a>.
        </p>
    </footer>
<script>
        const dataInput = document.getElementById('data');
        const marginInput = document.getElementById('margin');
        const logoInput = document.getElementById('logo');
        const removeLogoBtn = document.getElementById('removeLogo');
        const fgColorInput = document.getElementById('fgColor');
        const fgColorPreview = document.getElementById('fgColorPreview');
        const dotTypeSelect = document.getElementById('dotType');

        const cornersSquareTypeSelect = document.getElementById('cornersSquareType');
        const cornersSquareColorInput = document.getElementById('cornersSquareColor');
        const cornersSquareColorPreview = document.getElementById('cornersSquareColorPreview');
        const cornersDotTypeSelect = document.getElementById('cornersDotType');
        const cornersDotColorInput = document.getElementById('cornersDotColor');
        const cornersDotColorPreview = document.getElementById('cornersDotColorPreview');

        const bgTypeSelect = document.getElementById('bgType');
        const solidBgOptionsDiv = document.getElementById('solidBgOptions');
        const gradientBgOptionsDiv = document.getElementById('gradientBgOptions');
        const bgColorInput = document.getElementById('bgColor');
        const bgColorPreview = document.getElementById('bgColorPreview');
        const bgGradientTypeSelect = document.getElementById('bgGradientType');
        const bgGradientRotationInput = document.getElementById('bgGradientRotation');
        const bgGradientRotationContainer = document.getElementById('bgGradientRotationContainer');
        const bgGradientColor1Input = document.getElementById('bgGradientColor1');
        const bgGradientColor1Preview = document.getElementById('bgGradientColor1Preview');
        const bgGradientColor2Input = document.getElementById('bgGradientColor2');
        const bgGradientColor2Preview = document.getElementById('bgGradientColor2Preview');

        const logoSizeInput = document.getElementById('logoSize');
        const logoMarginInput = document.getElementById('logoMargin');
        const hideBackgroundDotsCheckbox = document.getElementById('hideBackgroundDots');

        const qrCodeContainer = document.getElementById('qrCodeContainer');
        const downloadBtn = document.getElementById('downloadBtn');
        const qrLoadingText = document.getElementById('qrLoading');

        let uploadedLogo = null;
        // const qrPreviewSize = 300; // Max size for preview container // Using dynamic size now

        const qrCodeInstance = new QRCodeStyling({
            width: qrCodeContainer.clientWidth || 250, // Initial width
            height: qrCodeContainer.clientHeight || 250, // Initial height
            type: 'svg',
            data: dataInput.value,
            image: '',
            margin: parseInt(marginInput.value) || 0,
            dotsOptions: {
                color: fgColorInput.value,
                type: dotTypeSelect.value
            },
            backgroundOptions: { // Default to solid white initially
                color: bgColorInput.value,
            },
            cornersSquareOptions: {
                type: cornersSquareTypeSelect.value || undefined,
                color: cornersSquareColorInput.value
            },
            cornersDotOptions: {
                type: cornersDotTypeSelect.value || undefined,
                color: cornersDotColorInput.value
            },
            imageOptions: {
                crossOrigin: 'anonymous',
                margin: parseInt(logoMarginInput.value) || 0,
                imageSize: parseFloat(logoSizeInput.value) || 0.3,
                hideBackgroundDots: hideBackgroundDotsCheckbox.checked
            },
            qrOptions: {
                errorCorrectionLevel: 'H'
            }
        });

        function updateQrCode() {
            if (!qrCodeInstance) return;
            qrLoadingText.classList.remove('hidden');
            qrCodeContainer.classList.add('opacity-50');

            let backgroundOpts = {}; // Initialize as empty object

            const selectedBgType = bgTypeSelect.value;

            if (selectedBgType === 'solid') {
                backgroundOpts.color = bgColorInput.value;
            } else if (selectedBgType === 'gradient') {
                backgroundOpts.gradient = {
                    type: bgGradientTypeSelect.value,
                    rotation: bgGradientTypeSelect.value === 'linear' ? parseFloat(bgGradientRotationInput.value) : 0,
                    colorStops: [
                        { offset: 0, color: bgGradientColor1Input.value },
                        { offset: 1, color: bgGradientColor2Input.value }
                    ]
                };
                // When using a gradient, qr-code-styling often expects the base color to be transparent
                // or it might overlay. To be explicit for gradients, we can set a transparent base.
                backgroundOpts.color = 'transparent';
            } else if (selectedBgType === 'transparent') {
                backgroundOpts.color = 'transparent'; // MODIFIED HERE
            }


            const options = {
                width: qrCodeContainer.clientWidth || 250,
                height: qrCodeContainer.clientHeight || 250,
                data: dataInput.value || "Advanced QR Generator",
                margin: parseInt(marginInput.value) || 0,
                dotsOptions: {
                    color: fgColorInput.value,
                    type: dotTypeSelect.value
                },
                cornersSquareOptions: {
                    type: cornersSquareTypeSelect.value || undefined,
                    color: cornersSquareColorInput.value
                },
                cornersDotOptions: {
                    type: cornersDotTypeSelect.value || undefined,
                    color: cornersDotColorInput.value
                },
                backgroundOptions: backgroundOpts,
                image: uploadedLogo || '',
                imageOptions: {
                    crossOrigin: 'anonymous',
                    margin: parseInt(logoMarginInput.value) || 0,
                    imageSize: parseFloat(logoSizeInput.value) || 0.4,
                    hideBackgroundDots: hideBackgroundDotsCheckbox.checked
                }
            };

            qrCodeInstance.update(options);

            setTimeout(() => {
                qrLoadingText.classList.add('hidden');
                qrCodeContainer.classList.remove('opacity-50');
            }, 200);
        }

        function setupColorPicker(inputEl, previewEl) {
            previewEl.style.backgroundColor = inputEl.value;
            inputEl.addEventListener('input', () => {
                previewEl.style.backgroundColor = inputEl.value;
                updateQrCode();
            });
            previewEl.addEventListener('click', () => inputEl.click());
        }

        setupColorPicker(fgColorInput, fgColorPreview);
        setupColorPicker(bgColorInput, bgColorPreview);
        setupColorPicker(cornersSquareColorInput, cornersSquareColorPreview);
        setupColorPicker(cornersDotColorInput, cornersDotColorPreview);
        setupColorPicker(bgGradientColor1Input, bgGradientColor1Preview);
        setupColorPicker(bgGradientColor2Input, bgGradientColor2Preview);

        bgTypeSelect.addEventListener('change', () => {
            const selectedType = bgTypeSelect.value;
            solidBgOptionsDiv.classList.add('hidden');
            gradientBgOptionsDiv.classList.add('hidden');

            if (selectedType === 'solid') {
                solidBgOptionsDiv.classList.remove('hidden');
            } else if (selectedType === 'gradient') {
                gradientBgOptionsDiv.classList.remove('hidden');
                bgGradientRotationContainer.style.display = bgGradientTypeSelect.value === 'linear' ? 'block' : 'none';
            }
            // For 'transparent', both solid and gradient controls remain hidden.
            updateQrCode();
        });

        bgGradientTypeSelect.addEventListener('change', () => {
             bgGradientRotationContainer.style.display = bgGradientTypeSelect.value === 'linear' ? 'block' : 'none';
            updateQrCode();
        });

        const inputsToUpdate = [
            dataInput, marginInput, dotTypeSelect,
            cornersSquareTypeSelect, cornersDotTypeSelect,
            bgGradientRotationInput,
            logoSizeInput, logoMarginInput, hideBackgroundDotsCheckbox
        ];
        inputsToUpdate.forEach(input => input.addEventListener(input.type === 'checkbox' ? 'change' : 'input', updateQrCode));
        [cornersSquareTypeSelect, cornersDotTypeSelect, bgGradientTypeSelect].forEach(sel => sel.addEventListener('change', updateQrCode));


        logoInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file && file.type === "image/png") {
                const reader = new FileReader();
                reader.onload = function(e) {
                    uploadedLogo = e.target.result;
                    removeLogoBtn.classList.remove('hidden');
                    updateQrCode();
                }
                reader.readAsDataURL(file);
            } else if (file) {
                alert("Please upload a PNG file for the logo.");
                logoInput.value = "";
                uploadedLogo = null;
                removeLogoBtn.classList.add('hidden');
                updateQrCode();
            }
        });

        removeLogoBtn.addEventListener('click', () => {
            uploadedLogo = null;
            logoInput.value = "";
            removeLogoBtn.classList.add('hidden');
            updateQrCode();
        });

        downloadBtn.addEventListener('click', () => {
            if (qrCodeInstance) {
                qrLoadingText.textContent = "Preparing download...";
                qrLoadingText.classList.remove('hidden');
                downloadBtn.disabled = true;
                downloadBtn.classList.add('opacity-50', 'cursor-not-allowed');

                const downloadSize = 1024;
                const currentOptions = { ...qrCodeInstance._options }; // Clone current options

                // Ensure background is correctly set for download based on current selection
                let downloadBgOpts = {};
                const selectedBgType = bgTypeSelect.value;
                if (selectedBgType === 'solid') {
                    downloadBgOpts.color = bgColorInput.value;
                } else if (selectedBgType === 'gradient') {
                    downloadBgOpts.gradient = {
                        type: bgGradientTypeSelect.value,
                        rotation: bgGradientTypeSelect.value === 'linear' ? parseFloat(bgGradientRotationInput.value) : 0,
                        colorStops: [ { offset: 0, color: bgGradientColor1Input.value }, { offset: 1, color: bgGradientColor2Input.value }]
                    };
                    downloadBgOpts.color = 'transparent'; // Important for gradient PNG
                } else if (selectedBgType === 'transparent') {
                    downloadBgOpts.color = 'transparent';
                }


                const dlInstance = new QRCodeStyling({
                    ...currentOptions, // Spread existing options
                    width: downloadSize,
                    height: downloadSize,
                    backgroundOptions: downloadBgOpts, // Apply specific background for download
                    type: 'png' // Request PNG directly
                });

                dlInstance.getRawData('png').then((blob) => {
                    if (blob) {
                        const url = URL.createObjectURL(blob);
                        const anchor = document.createElement('a');
                        anchor.href = url;
                        const dataText = dataInput.value.replace(/[^a-zA-Z0-9]/g, '_').substring(0, 30) || "qrcode";
                        anchor.download = `${dataText}_qr_code.png`;
                        document.body.appendChild(anchor);
                        anchor.click();
                        document.body.removeChild(anchor);
                        URL.revokeObjectURL(url);
                    } else {
                        alert("Error generating QR code for download.");
                    }
                }).catch(err => {
                    console.error("Download error:", err);
                    alert("An error occurred: " + err.message);
                }).finally(() => {
                    qrLoadingText.classList.add('hidden');
                    qrLoadingText.textContent = "Generating QR Code...";
                    downloadBtn.disabled = false;
                    downloadBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                });
            }
        });

        qrCodeInstance.append(qrCodeContainer);
        bgTypeSelect.dispatchEvent(new Event('change')); // Sets initial UI for background options
        updateQrCode();

        window.addEventListener('resize', () => {
            const containerWidth = qrCodeContainer.clientWidth;
             if (qrCodeInstance._options.width !== containerWidth && containerWidth > 50) {
                updateQrCode(); // Call updateQrCode to re-evaluate width and height
            }
        });
</script>
    
</body>
</html>